<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>KULUNU</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="assets/img/ku.png" rel="icon">
  <link href="assets/img/ku.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
   <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet"> 
</head>

<body class="index-page">

<!-- ======= Kulunu Header + Profile Nav (drop-in replacement) ======= -->
<header id="header" class="header sticky-top kulunu-header">
  <div class="container">
    <!-- left: logo -->
    <a href="index.html" class="kulunu-logo">
      <img src="assets/img/ku.png" alt="KULUNU logo">
    </a>

    <!-- right: nav / profile -->
    <nav class="kulunu-nav">
      <!-- desktop actions -->
      

      <!-- profile button -->
      <div style="position:relative;">
        <button id="kulunuProfileBtn" class="kulunu-profile-btn" aria-haspopup="true" aria-expanded="false" title="Open account">
          <div class="kulunu-avatar">
            <!-- small avatar; replace with real image or initials -->
            <img src="assets/img/avatar-placeholder.png" alt="avatar">
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-start;gap:0;">
            <small style="color:rgba(255,255,255,0.95); font-weight:700;">Nonso Chukwu</small>
            <small style="color:rgba(255,255,255,0.85); font-size:12px;">nonso@gmail.com</small>
          </div>
          <i class="bi bi-chevron-down" style="color:#fff; margin-left:8px;"></i>
        </button>

        <!-- dropdown -->
        <div id="kulunuProfileDropdown" class="kulunu-profile-dropdown" role="dialog" aria-label="Account menu">
          <div class="kulunu-profile-head">
            <div class="kulunu-avatar" style="width:48px;height:48px;">
              <img src="assets/img/avatar-placeholder.png" alt="avatar">
            </div>
            <div class="meta">
              <div class="name">Nonso Chukwu</div>
              <div class="email">nonso@gmail.com</div>
            </div>
          </div>

          <div class="kulunu-wallet" aria-hidden="false">
            <div>
              <div style="font-size:12px; color:#667085;">Wallet balance</div>
              <div class="amount">₦52.800</div>
            </div>
            <div>
              <button class="kulunu-add-btn kulunu-add-small add-btn">+ Add funds</button>
            </div>
          </div>

          <nav class="kulunu-menu" aria-label="Account actions">
            <a href="dashboard.html" data-action="book-flight"><i class="bi bi-airplane"></i>Find Flights</a>
            <a href="Roadtrip.html" data-action="book-road"><i class="bi bi-car-front"></i> Find Trips</a>
            <a href="Ticket.html" data-action="buy-eticket"><i class="bi bi-ticket-perforated"></i>Ticketing</a>
            <a href="#" data-action="settings"><i class="bi bi-gear"></i> Settings</a>
          </nav>

          <a href="#" class="kulunu-logout" id="kulunuLogoutBtn"><i class="bi bi-box-arrow-right"></i> Log out</a>
        </div>
      </div>
    </nav>
  </div>

  <!-- small script to handle dropdown + mobile actions -->
  <script>
    (function(){
      const profileBtn = document.getElementById('kulunuProfileBtn');
      const dropdown = document.getElementById('kulunuProfileDropdown');
      const hamburger = document.getElementById('kulunuHamburger');

      // toggle profile dropdown
      profileBtn && profileBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        const open = dropdown.classList.toggle('active');
        profileBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
      });

      // close when clicking outside
      document.addEventListener('click', (e) => {
        if (!dropdown.contains(e.target) && !profileBtn.contains(e.target)) {
          dropdown.classList.remove('active');
          profileBtn && profileBtn.setAttribute('aria-expanded', 'false');
        }
      });

      // keyboard close (Esc)
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          dropdown.classList.remove('active');
          profileBtn && profileBtn.setAttribute('aria-expanded', 'false');
        }
      });

      // mobile hamburger opens the dropdown as a quick menu
      hamburger && hamburger.addEventListener('click', (e) => {
        e.stopPropagation();
        dropdown.classList.toggle('active');
      });

      // hook menu item clicks (example: route / perform actions)
      document.querySelectorAll('.kulunu-menu a').forEach(a => {
        a.addEventListener('click', (ev) => {
          const action = a.dataset.action;
          // example behavior - replace with real navigation
          console.log('menu action:', action);
          // close dropdown after selection
          dropdown.classList.remove('active');
          profileBtn && profileBtn.setAttribute('aria-expanded', 'false');
        });
      });

      // example add funds
      document.querySelectorAll('.kulunu-add-btn, .kulunu-add-small').forEach(b => {
        b.addEventListener('click', (ev) => {
          ev.preventDefault();
          alert('Open add-funds flow (replace with your implementation).');
        });
      });

      // logout
      document.getElementById('kulunuLogoutBtn').addEventListener('click', (ev) => {
        ev.preventDefault();
        // implement logout logic (clear auth, redirect, etc.)
        alert('Logging out — implement your auth logout.');
      });
    })();
  </script>
</header>
<!-- ======= End Kulunu Header + Profile Nav ======= -->


  <main class="main">
   <!-- HERO -->
  <section class="hero">
    <h1 style="color: white;"><strong>Your Next Journey with Kulunu</strong></h1>
    <p>Book your Bus ticket across all African transport company — all in one place.</p>
  </section>

  <!-- BOOKING CARD -->
  <section class="booking-container">
    <div class="tab-menu">
      <button class="tab-btn active" data-target="flight">
         Book a seat
      </button>
      <button class="tab-btn" data-target="road">
        Hire a bus
      </button>
      <button class="tab-btn" data-target="eticket">
        Booking status
      </button>
    </div>

    <!-- Book a seat -->
    <div class="form-section active" id="flight">
  <div class="filter-bar flight-filter">
    <button class="filter-btn active" data-type="oneway">One Way</button>
    <button class="filter-btn" data-type="round">Round Trip</button>
  </div>
  <form class="search-grid" role="search" onsubmit="event.preventDefault();">
    <!-- Transport Company -->
<select id="companySelect">
  <option value="">Select Transport Company</option>
  <option value="gigm">God is Good Motors</option>
  <option value="abc">ABC Transport</option>
  <option value="peace">Peace Mass Transit</option>
</select>

<!-- Departure Terminal -->
<select id="departureTerminal" disabled>
  <option value="">Select Departure Terminal</option>
</select>

<!-- Arrival Terminal -->
<select id="arrivalTerminal" disabled>
  <option value="">Select Arrival Terminal</option>
</select>
    <input type="date" class="small flight-depart">
    <input type="date" class="small return return-flight">
    <select class="small">
      <option>1 Adult</option>
      <option>2 Adults</option>
      <option>3 Adults</option>
      <option>4 Adults</option>
      <option>5 Adults</option>
      <option>6 Adults</option>
      <option>7 Adults</option>
      <option>8 Adults</option>
      <option>9 Adults</option>
      <option>10 Adults</option>
    </select>
    <button class="search-btn" onclick="window.location.href='#'">Proceed</button>
  </form>
</div>

<!-- Hire a Bus -->
<div class="form-section" id="road">
  <div class="filter-bar road-filter">
    <button class="filter-btn active" data-type="oneway">One Way</button>
    <button class="filter-btn" data-type="round">Round Trip</button>
  </div>
  <form class="search-grid" role="search" onsubmit="event.preventDefault();">
    <!-- Transport Company -->
<select id="companySelect">
  <option value="">Select Transport Company</option>
  <option value="gigm">God is Good Motors</option>
  <option value="abc">GUO Transport</option>
  <option value="peace">ABC Transport</option>
</select>

<!-- Departure Terminal -->
<select id="departureTerminal" disabled>
  <option value="">Departure</option>
</select>

<!-- Arrival Terminal -->
<select id="arrivalTerminal" disabled>
  <option value="">Arrival</option>
</select>

    <input type="date" class="small road-depart">
    <input type="date" class="small return return-road">
    <button class="search-btn">Proceed</button>
  </form>
</div>

<!-- Booking Status -->
    <div class="form-section" id="eticket">
      <form>
        <input placeholder="Enter Reference Code">
        <button class="search-btn">Proceed</button>
      </form>
    </div>
  </section>

<script>
/* Company → Terminals mapping */
const terminalsByCompany = {
  gigm: [
    "Jibowu Terminal",
    "Utako Terminal",
    "Benin Terminal",
    "Asaba Terminal"
  ],
  abc: [
    "Ojota Terminal",
    "Umuahia Terminal",
    "Onitsha Terminal",
    "Owerri Terminal"
  ],
  peace: [
    "Mile 2 Terminal",
    "Enugu Terminal",
    "Awka Terminal",
    "Aba Terminal"
  ]
};

const companySelect = document.getElementById("companySelect");
const departureSelect = document.getElementById("departureTerminal");
const arrivalSelect = document.getElementById("arrivalTerminal");

/* Utility: reset dropdown */
function resetSelect(select, label) {
  select.innerHTML = `<option value="">${label}</option>`;
  select.disabled = true;
}

/* Populate dropdown */
function populateSelect(select, items) {
  items.forEach(item => {
    const option = document.createElement("option");
    option.value = item;
    option.textContent = item;
    select.appendChild(option);
  });
  select.disabled = false;
}

/* When company changes */
companySelect.addEventListener("change", function () {
  const company = this.value;

  resetSelect(departureSelect, "Select Departure Terminal");
  resetSelect(arrivalSelect, "Select Arrival Terminal");

  if (!company) return;

  const terminals = terminalsByCompany[company];

  populateSelect(departureSelect, terminals);
  populateSelect(arrivalSelect, terminals);
});

/* Prevent same departure & arrival */
departureSelect.addEventListener("change", function () {
  const selectedDeparture = this.value;

  [...arrivalSelect.options].forEach(option => {
    option.disabled = option.value === selectedDeparture && option.value !== "";
  });
});

arrivalSelect.addEventListener("change", function () {
  const selectedArrival = this.value;

  [...departureSelect.options].forEach(option => {
    option.disabled = option.value === selectedArrival && option.value !== "";
  });
});
</script>



<script>
  // Tab switching
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('.form-section').forEach(f => f.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById(btn.dataset.target).classList.add('active');
    });
  });

  /* ------------------------
     FLIGHT FILTER
  ------------------------ */
  const flightButtons = document.querySelectorAll(".flight-filter .filter-btn");
  const flightReturn = document.querySelector(".return-flight");

  flightButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      flightButtons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      flightReturn.style.display =
        btn.dataset.type === "oneway" ? "none" : "block";
    });
  });

  flightReturn.style.display = "none"; // hide on load


  /* ------------------------
     ROAD (HIRE A BUS) FILTER
  ------------------------ */
  const roadButtons = document.querySelectorAll(".road-filter .filter-btn");
  const roadReturn = document.querySelector(".return-road");

  roadButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      roadButtons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");

      roadReturn.style.display =
        btn.dataset.type === "oneway" ? "none" : "block";
    });
  });

  roadReturn.style.display = "none"; // hide on load
</script>

<script>
  function bookTrip(trip) {
  const primary = JSON.parse(localStorage.getItem("primaryTraveler"));
  const coTravelers = JSON.parse(localStorage.getItem("coTravelers")) || [];

  let passengers = [];
  if (primary) passengers.push(primary);
  passengers.push(...coTravelers);

  const bookingData = {
    tripType: "road", // <---- MUST ADD
    travelInfo: {
      from: trip.from,
      to: trip.to,
      date: new Date().toISOString().split("T")[0],
      time: trip.time,
      company: trip.company,
      price: trip.price
    },
    passengers
  };

  localStorage.setItem("bookingData", JSON.stringify(bookingData));
  window.location.href = "Confirm.html";
}

</script>

</body>

</html>